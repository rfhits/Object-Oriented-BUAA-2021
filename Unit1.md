# Unit1

如果你想膜拜大佬，给你指条路——[Mistariano大佬的OO2019第二次作业源代码](https://github.com/HansBug/oo_course_2019_17373331_homework_2)

不要抄袭，当然如果你重构能力彪悍查重机奈何不了你也行。

如果想要避免大量的重构，我的建议是直接从homework3入手，Jay1Zhang学长有存2019春OOhomework的描述，[链接](https://github.com/Jay1Zhang/BUAA-OO-2019)。

只记录自己的bug并且提供一些样例。

## hack

在homework1，我hack了别人一次，因为有人遇到0不输出，最后输出结果带个加号

```
in: 2*x+1
out: 2+
```

不过后两次都没有hack到别人，反而自己被hack了。

## 我的bug

1. pow的求导错了，认为x^n->x^(n-1)
2. `clone()`写错了，如果各位有做优化，要特别注意是否使用`clone()`
3. poly的`toString()`没加括号，导致输出时运算的优先级改变。

## 优化

如果第一次就按照第三次的标准来，我的建议是，写出一个合并同类项的方法，然后在后续作业中不断迭代。

## 可能的bug

1. homework1中，有同学对输入的`String`进行连续加减符号的替换，是只考虑了连续的两个加减符号，而未考虑连续的三个加减符号。也就是说，`+++1`符合输入要求，至少得替换两次。
2. tab和空格分不清。判断空字符的正则表达式错误地写为了`[\s]`，但是应该写作`[\t]`。
3. 省略了每一项系数中的`1`，而忘记去掉后面的`*`号。例如，对于项 `-1*x`，省略了其中的`1`，却没有去掉后面的`*`，结果输出了`-*x`。
4. 在嵌套的层数太多时，由于调用的方法太过复杂，程序计算时间会超时，如`((1+(1+(1+(1+x)))))`等样例。
5. `(x)*(x)*(x)`会输出为`(x)**2`
6. `x**-1*-1`类似乘以负常数因子时，符号处理不当造成的bug。还有部分同学因为优化失误，造成了format error
7. 为了缩短字符串长度将x**2转换成x*x输出，但是如果多项式嵌套在三角函数中，这样的转换方式会导致表达式不合法。
8. `cos/sin`括号中的因子为带符号数时，如果符号和数字分开属于WF。即`+_1`合法，`sin(+_1)`不合法。这个要结合当年指导书的具体要求。
9. `cos/sin`的因子求导时括号省略出现问题，导致会出现输出结果形式不合法的情况。

## 样例

```
+++1+1+  +1+++1
sin(x**3)
(((((((((((((((x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1)*x+1
cos(+ 1)
x@x
-1*x
(x)*(x)*(x)*(x)
x**-1*-1
```
